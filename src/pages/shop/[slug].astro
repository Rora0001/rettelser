---
import Layout from "../../layouts/Layout.astro";
import Footer from "../../components/Footer.astro";

export async function getStaticPaths() {
  const data = await fetch("https://fxxjknteqkhsjhtimjjc.supabase.co/rest/v1/eksamenscase?", {
    method: "GET",
    headers: {
      apikey: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZ4eGprbnRlcWtoc2podGltampjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MTU5NDAyODcsImV4cCI6MjAzMTUxNjI4N30.m9y52VCukhWnKC_k4PCgWlz1mVReietqdz4j0V_C9sg",
    },
  }).then((response) => response.json());

  return data.map((shop) => {
    return {
      params: { slug: shop.slug },
      props: { myData: shop },
    };
  });
}

const { myData } = Astro.props;
console.log(myData);
---

<Layout title="something">
  <div class="content">
    <img src={myData.Image} alt="Product Image" />
    <div class="first-line">
      <h1>{myData.Name}</h1>
      <h2>DKK {myData.Price} ,-</h2>
    </div>
    <div class="second-line">
      <h3>{myData.Format} cm.</h3>
      <button class="buy-button">Køb nu</button>
    </div>
    <h4>Describtion</h4>
    <p>{myData.Description}</p>
  </div>

  <Footer />

  <script>
    // Vælg knappen
    const buyButton = document.querySelector(".buy-button");

    // Tilføj eventlistener til knappen
    buyButton.addEventListener("click", function () {
      // Håndter købsklik
      alert("Tak for dit køb!");
    });
  </script>

  <style>
    .first-line,
    .second-line {
      display: flex;
      justify-content: space-between; /* Fordeler pladsen ligeligt mellem elementerne */
      width: 100%;
      padding: 0 0.5rem; /* Tilføjer lidt indre margin for at centrere teksten bedre */
    }

    .content img {
      max-width: 100%; /* Sørg for, at billedet ikke overstiger containerens bredde */
      height: auto; /* Behold billedets proportioner */
      margin-bottom: 1rem; /* Tilføj lidt afstand under billedet */
      margin-top: 4rem; /* Ryk billedet lidt ned */
    }

    .content {
      text-align: center; /* Centrerer indholdet */
      padding: 2rem; /* Tilføjer polstring omkring indholdet */
    }

    .content img {
      max-width: 100%; /* Sørg for, at billedet ikke overstiger containerens bredde */
      height: auto; /* Behold billedets proportioner */
      margin-bottom: 1rem; /* Tilføj lidt afstand under billedet */
    }

    .content h1 {
      font-size: 1rem; /* Juster størrelsen af overskriften */
      margin-bottom: 2rem; /* Tilføj lidt afstand under overskriften */
    }

    .content h2 {
      font-size: 1rem; /* Juster størrelsen af overskriften */
      margin-bottom: 2rem;
    }

    .content h3 {
      font-size: 1rem;
    }

    .content h4 {
      text-align: left;
      padding: 2rem 0.5rem 1rem;
    }

    .content p {
      font-size: 1rem; /* Juster størrelsen af teksten */
      margin-bottom: 1rem; /* Tilføj lidt afstand under hver afsnit */
      text-align: left;
      padding: 0 0.5rem;
    }

    .buy-button {
      padding: 0.5rem 2rem; /* Tilføj polstring til knappen */
      background-color: transparent; /* Gennemsigtig baggrundsfarve */
      color: black; /* Tekstfarve for knappen */
      border: 1px solid black; /* Ydre streg */
      cursor: pointer; /* Gør cursoren til en pil, når der holdes over knappen */
      transition:
        background-color 0.3s,
        color 0.3s; /* Tilføj en overgang for en smidig ændring af farver */
    }

    .buy-button:hover {
      background-color: #e7d9d9; /* Baggrundsfarve, når der holdes over */
      color: black; /* Tekstfarve, når der holdes over */
    }
  </style>
</Layout>
